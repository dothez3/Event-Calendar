<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CFD Architect LLC</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
  :root { --sidebar-w: 240px; }
  body { min-height: 100vh; }
  .sidebar {
    position: fixed; top: 0; left: 0; bottom: 0;
    width: var(--sidebar-w);
    background: #111827;   /* dark slate background */
    color: #f9fafb;
    padding: 1rem;
    overflow-y: auto;
  }
  .sidebar a { color: #e5e7eb; text-decoration: none; }
  .sidebar a.active, .sidebar a:hover { color: #ffffff; }
  .brand { font-weight: 700; letter-spacing: .3px; }
  .nav-vertical .nav-link {
    border-radius: .5rem;
    padding: .5rem .75rem;
    margin-bottom: .25rem;
  }
  .app-content {
    margin-left: var(--sidebar-w);
    padding: 1.25rem;
  }
</style>
  </head>
  <body>
 <aside class="sidebar">
  <div class="mb-3">
    <a class="brand h5 mb-0 d-block"
       href="{{ url_for('dashboard') if current_user.is_authenticated else url_for('index') }}">
       CFD Architect LLC
    </a>
    <div class="small text-secondary">
      {% if current_user.is_authenticated %}Hi, {{ current_user.name }}{% else %}Guest{% endif %}
    </div>
  </div>
  <nav class="nav nav-vertical flex-column mb-3">
    {% if current_user.is_authenticated %}
      <a class="nav-link {% if request.endpoint=='dashboard' %}active{% endif %}" href="{{ url_for('dashboard') }}">Dashboard</a>
      <a class="nav-link {% if request.endpoint=='projects' %}active{% endif %}" href="{{ url_for('projects') }}">Projects</a>
      <!--  changes: Events visible to both employees and clients -->
      <a class="nav-link {% if request.endpoint=='events' %}active{% endif %}" href="{{ url_for('events') }}">Events</a>
      <!--  changes: Show employee-only menu items -->
      {% if current_user.role == 'employee' %}
        <!-- changes: Notifications link for employees -->
        <a class="nav-link {% if request.endpoint=='notifications' %}active{% endif %}" href="{{ url_for('notifications') }}">Notifications</a>
      {% endif %}
      <!--  changes: Show employee-only menu items -->
      {% if current_user.role == 'employee' %}
        <a class="nav-link {% if request.endpoint=='clients' %}active{% endif %}" href="{{ url_for('clients') }}">Clients</a>
        <a class="nav-link {% if request.endpoint=='buildings' %}active{% endif %}" href="{{ url_for('buildings') }}">Buildings</a>
        <a class="nav-link {% if request.endpoint=='admin_users' %}active{% endif %}" href="{{ url_for('admin_users') }}">User Management</a>
      {% endif %}
    {% endif %}
  </nav>
  <div class="d-grid gap-2">
    {% if current_user.is_authenticated %}
      <a class="btn btn-sm btn-outline-light" href="{{ url_for('logout') }}">Logout</a>
    {% else %}
      <a class="btn btn-sm btn-light" href="{{ url_for('index') }}">Login</a>
    {% endif %}
  </div>
</aside>
  <main class="app-content">
    {% with messages = get_flashed_messages(with_categories=True) %}
      {% if messages %}
        <div class="mb-3">
          {% for category, msg in messages %}
            <div class="alert alert-{{ category }}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
 </main>
  <!-- Bootstrap JS (needed for collapse, modals, dropdowns, etc.) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- FullCalendar JS -->
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
  </body>
</html>
